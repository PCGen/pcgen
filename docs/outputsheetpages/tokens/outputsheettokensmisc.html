<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>
	<!--
		PCGen Documentation Project

		$Author$
		$Date$
		$Revision$

		Contributors:
		Shane Molnar - shaneATcliftonmotelDOTcomDOTau
		Sigurdur H. Olafsson - shoATtnDOTis
		Terry FitzSimons - fitzsimonsATmintelDOTnet

		Description:
		Provides information on the use of Output Sheet Tokens: Miscellaneous.
	-->
	<head>
		<title>Miscellaneous Output Sheet Tokens</title>
		<link rel="stylesheet" type="text/css" href="../../pcgen.css">
  		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	</head>

	<body>
		<h1>Miscellaneous Output Sheet Tokens</h1>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="MATH">Token Name:</a></strong> x&lt;Mathematical Operator&gt;x </p>
		<p class="indent1"><strong> Variables Used (x):</strong>  Number (Operand - can both be either numbers
			or valid numeric tokens.).</p>
		<p class="indent1"><strong> Variables Used (Mathematical Operator):</strong> Text (Operator).</p>
		<ul class="indent2">
			<li>+ (Addition operator).</li>
			<li>- (Subtraction operator).</li>
			<li>* (Multiplication operator).</li>
			<li>/ (Divisor operator).</li>
			<li>@ (Divisor operator that returns an integer).</li>
			<li>^ (Exponentiation operator).</li>
			<li>INTVAL (Displays just the integer portion of the result).</li>
			<li>NOZERO (Displays blank if the result is zero, otherwise displays the result with the appropriate sign).</li>
			<li>SIGN (Pre-pends a sign (+ or -) to the result. This is ignored if it already has a sign).</li>
			<li>TRUNC (Displays the integer and the first decimal place of the result).</li>
		</ul>
		<p class="indent1"><strong>What it does:</strong></p>
		<ul class="indent2">
			<li>Simple mathematical operations are supported in the output sheets.</li>
			<li>Do not use spaces in between the operands and the operator.</li>
		</ul>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>TOTALLEVELS+15</code></p>
		<p class="indent3">Displays the total number of levels plus 15.</p>
		<p class="indent2"><code>(COMBAT.AC.TOTAL-3).INTVAL</code></p>
		<p class="indent3">Displays the integer portion of the Combat Armor Class minus 3.</p>
		<p class="indent2"><code>SKILL.Spot.RANKS*SKILL.Listen.RANKS</code></p>
		<p class="indent3">Displays the number of spot ranks multiplied by the number of listen ranks.</p>
		<p class="indent2"><code>(SKILLPOINTS.UNUSED/2).TRUNC</code></p>
		<p class="indent3">Displays the integer and fist decimal place of the unused skill points divided by 2.</p>
		<p class="indent2"><code>(VAR.RangeMod-2).INTVAL.SIGN</code></p>
		<p class="indent3">Displays the integer portion preceded with a sign (+ or -) for the result of the Range
			Modifier minus 2.</p>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="%">Token Name:</a></strong> |%x|</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Text (Filter Option).</p>
		<ul class="indent2">
			<li>ARMOR.x - Will stop all output unless the character has at least x pieces of Armor.</li>
			<li>ARMOR.ITEM.x - Will stop all output unless the character has at least x items that confer armor bonuses.</li>
			<li>ARMOR.SHIELD.x - Will stop all output unless the character has at least x Shields.</li>
			<li>BIO - Will stop all output unless the character has a Biography entered.</li>
			<li>CATCHPHRASE - Will stop all output unless the character has a Catch Phrase entered.</li>
			<li>COUNT.x - Will stop all output unless the character has more than zero of the counted entity.</li>
			<li>DESC - Will stop all output unless the character has a Description entered.</li>
			<li>DOMAIN.x - Will stop all output unless the character has at least x Domains.</li>
			<li>GAMEMODE.x - Will stop all output unless Gamemode x is used.</li>
			<li>INTERESTS - Will stop all output unless the character has an Interest entered.</li>
			<li>LOCATION - Will stop all output unless the character has a Location entered.</li>
			<li>MISC.COMPANIONS - Will stop all output unless the character has Companions entered.</li>
			<li>MISC.FUNDS - Will stop all output unless the character has Funds entered.</li>
			<li>MISC.MAGIC - Will stop all output unless the character has Magic entered.</li>
			<li>NOTES - Will stop all output unless the character has Notes entered.</li>
			<li>PERSONALITY.x - Will stop all output unless the character has personality x entered.</li>
			<li>PHOBIAS - Will stop all output unless the character has a Phobia entered.</li>
			<li>PROHIBITEDLIST - Will stop all output unless the character has a Prohibited Spell List entered.</li>
			<li>REGION - Will stop all output unless the character has a Region entered.</li>
			<li>RESIDENCE - Will stop all output unless the character has a Residence entered.</li>
			<li>SKILLPOINTS - Will stop all output unless the character has the total skill points specified.</li>
			<li>SPEECHTENDENCY - Will stop all output unless the character has a Speech Tendency entered.</li>
			<li>SPELLLISTBOOK.class.level.sbook - Will stop all output unless the character has the specified spell in their spell book.</li>
			<li>SPELLLISTCLASS.x - Will stop all output unless the character has at least x Class Spell Lists.</li>
			<li>SUBREGION - Will stop all output unless the character has a Sub-region entered.</li>
			<li>FOLLOWERTYPE.type - Will stop all output unless the character has a follower of the type specified.</li>
			<li>TEMPLATE - Will stop all output unless the character has a Template.</li>
			<li>TEMPLATE.x - Will stop all output unless the character has at least x Templates.</li>
			<li>WEAPON.x - Will stop all output unless the character has at least x Weapons.</li>
			<li>WEAPONPROFS - The WEAPONPROFS filter is special in that it doesn't rely on the count, but on a
				setting in the preferences. If you choose to display WEPONPROFS on your sheet, the filter is ignored. If
				you choose not to, it filters even if you have WEAPONPROFS.</li>
		</ul>
		<p class="indent1"><strong>What it does:</strong></p>
		<ul class="indent2">
			<li>Used for filtering.</li>
			<li>Where x is the number of appropriate items the character must have or the
				filter will filter out all output until the next filter is reached or the
				filter is ended via the |%| token.</li>
			<li>Filter can also be a <strong>comma delimited list of Classname=level</strong> pairs
				(where Classname is a valid Class name and level is the minimum level of the
				class for the filter).</li>
			<li>Classname could also be <strong>SPELLLISTCLASS.x=level</strong>
				where x is the xth spellcasting class of the character.</li>
			<li>Filter can also be in the form <strong>VAR.name.label.value</strong> where name is the
				name of a defined variable, label is one of EQ (equals), NEQ (not equals), LT
				(less than) LTEQ, (less than equal to), GT (greater than), GTEQ (greater than
				equal to), and value is some value to which the named variable is compared. Only
				1 filter is active at a time (they can't be nested).</li>
		</ul>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>|%WEAPON.3|</code></p>
		<p class="indent3">The filter will stop all output (until this filter is
			ended or the next filter started) unless the character has at least 3 weapons.</p>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="BONUSLIST">Token Name:</a></strong> BONUSLIST.w,x,y,z</p>
		<p class="indent1"><strong> Variables Used (w):</strong> Text (The type of bonus to be displayed).</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Text (The subtype of bonus to be displayed).</p>
		<p class="indent1"><strong> Variables Used (y):</strong> Text (Optional Bonus Value Seperator - Defaults
			to a space &quot; &quot;).</p>
		<p class="indent1"><strong> Variables Used (z):</strong> Text (Optional Bonus Delimiter - Defaults to a
			comma-space &quot;, &quot;).</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2">Displays the list of bonuses by type and value associated with the tags involved.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>BONUSLIST.COMBAT.AC</code></p>
		<p class="indent3">Would list all COMBAT.AC bonuses as a comma-space delimited list.</p>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="BR">Token Name:</a></strong> BR</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2">Adds a carriage return to the output. Normally only used on text output
		sheets and inside manualwhitespace sections.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>2|BR|3</code></p>
		<p class="indent3">Then the output would look like:<br/>
			<code>2<br/>3</code></p>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="COUNT">Token Name:</a></strong> COUNT[x]</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Text (Count Type).</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<ul class="indent2">
			<li>Used to count objects and insert the result in other places.</li>
			<li>Can be used in any of the FOR loops in place of max.</li>
			<li>If you are having problems, try remembering this is a base 0 list. The first item is number
				Zero, not One.</li>
			<li>Also if you are still having problems, then you might have a Base 1 list, where the start
				is at One not Zero. Different programmers, different styles.</li>
			<li>The following are the tags that can be used as the &lt;Count Type&gt;:</li>
			<ul class="indent0">
				<li>CHECKS - The number of checks defined in the gameMode.</li>
				<li>CLASSES - The number of classes a character has.</li>
				<li>CONTAINERS - The number of containers a character has.</li>
				<li>DOMAINS - The number of domains a character has.</li>
				<li>EQTYPE.&lt;type1&gt;.ADD.&lt;type2&gt;.ADD.&lt;typen&gt; - The number of items of the type specified
					a character has. (All types present in equipment .lst files can be used here).</li>
				<li>EQTYPE.WEAPON - The number of weapons a character has.</li>
				<li>EQTYPE.ACITEM - The number of armor a character has.</li>
				<li>EQUIPMENT - The number of items a character has (one arrow in bow, 19 carried and 40 in backpack will return 1).</li>
				<li>EQUIPMENT.MERGELOC - The number of items a character has, including items split between locations (one arrow in bow, 19 carried and 40 in backpack will return 3).</li>
				<li>FEATNAME=&lt;featname&gt; - Some feats can be taken more than
					once. This will tell you how many times a particular feat has been taken. (If &lt;featname&gt; is VISIBLE:YES)</li>
				<li>FEATNAME=&lt;featname&gt;.ALL - Some feats can be taken more than
					once. This will tell you how many times a particular feat has been taken. (If &lt;featname&gt; is VISIBLE:NO)</li>
				<li>FEATS - This has been deprecated, use FEATS.VISIBLE instead.</li>
				<li>FEATS.ALL - The total number of visible and hidden feats a character has excluding automatic feats.</li>
				<li>FEATS.HIDDEN - The number of hidden feats a character has excluding automatic feats.</li>
				<li>FEATS.VISIBLE - The number of visible feats a character has excluding automatic feats.</li>
				<li>FEATSALL - This has been deprecated, use FEATSALL.VISIBLE instead.</li>
				<li>FEATSALL.ALL - The number of both visible and hidden feats a character has including automatic feats.</li>
				<li>FEATSALL.HIDDEN - The number of hidden feats a character has including automatic feats.</li>
				<li>FEATSALL.VISIBLE - The number of visible feats a character has including automatic feats.</li>
				<li>FEATSAUTO - This has been deprecated, use FEATAUTO.VISIBLE instead.</li>
				<li>FEATSAUTO.ALL - The number of both visible and hidden automatic feats a character has.</li>
				<li>FEATSAUTO.HIDDEN - The number of hidden automatic feats a character has.</li>
				<li>FEATSAUTO.VISIBLE - The number of visible automatic feats a character has.</li>
				<li>FEATTYPE.&lt;type1&gt;.&lt;type2&gt;.&lt;typen&gt; - This has been deprecated, use
					FEATTYPE.&lt;type1&gt;.&lt;type2&gt;.&lt;typen&gt;.VISIBLE instead.</li>
				<li>FEATTYPE.&lt;type1&gt;.&lt;type2&gt;.&lt;typen&gt;.ALL - The
					number of both visible and hidden feats of the type specified a character has.</li>
				<li>FEATTYPE.&lt;type1&gt;.&lt;type2&gt;.&lt;typen&gt;.HIDDEN - The
					number of hidden feats of the type specified a character has.</li>
				<li>FEATTYPE.&lt;type1&gt;.&lt;type2&gt;.&lt;typen&gt;.VISIBLE - The
					number of visible feats of the type specified a character has.</li>
				<li>FOLLOWERTYPE.&lt;followertype&gt; - The number of followers of
				the type specified a character has.</li>
				<li>LANGUAGES - The number of languages the character knows.</li>
				<li>MOVE - The number of movement types the character has.</li>
				<li>NOTES - The items notes entered when creating a custom item.</li>
				<li>RACESUBTYPES - The number of racial subtypes the character has.</li>
				<li>SA - The number of special abilities a character has.</li>
				<li>SKILLS - The number of skills the character knows.</li>
				<li>SPELLBOOKS - The number of spellbooks a character has.</li>
				<li>SPELLRACE - Returns 1 if the character has any innate spells, 0 if the character has no innate spells.</li>
				<li>SPELLSKNOWN - The number of spells the character knows.</li>
				<li>SPELLSINBOOK%class.%book.%level - The number of spells of a particular class, in a particular spell book and of a
					particular level that the character has (Note: The Known Spellbook is number 0, The Innate Spellbook
					is number 1 and the -1 Spellbook should not be used anymore).</li>
				<li>SPELLTIMES%class.%book.%level.%spell - The number of times the referenced spell has been memorized.</li>
				<li>STATS - The number of stats a character has.</li>
				<li>TEMPBONUSNAMES - The number of Temporary Bonus Tab items a character has.</li>
				<li>TEMPLATES - The number of templates a character has.</li>
				<li>VFEATS - This has been deprecated, use VFEATS.VISIBLE instead.</li>
				<li>VFEATS.ALL - The number of both visible and hidden virtual feats a character has.</li>
				<li>VFEATS.HIDDEN - The number of hidden virtual feats a character has.</li>
				<li>VFEATS.VISIBLE - The number of visible virtual feats a character has.</li>
				<li>VISION - The number of vision types a character has.</li>
			</ul>
		</ul>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>BONUS:HP|CURRENTMAX|3*COUNT[FEATNAME=Toughness]</code></p>
		<p class="indent3">The count token is used in this example to calculate the total bonus.</p>
		<p class="indent2"><code>	FOR,%num,0,COUNT[SKILLS],1,1<br />
															{Statements}<br />
															ENDFOR</code></p>
		<p class="indent3">The {statements} would be processed for each of the skills the character has.</p>
		<p class="indent2"><code>	FOR,%spell,0,COUNT[SPELLSINBOOK0.0.0],1,1<br />
															{Statements}<br />
															ENDFOR</code></p>
		<p class="indent3">The {statements} would be processed for each of the 0<sup>th</sup> level spells in
			the 1<sup>st</sup> classes 1<sup>st</sup> spellbook (known) that the character has.</p>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="JEPCOUNT">Token Name:</a></strong> count(x,y) - See <a href="../../listfilepages/globalfilestagpages/globalfilesformulas.html#count">jep count ()</a> function in the Global Formulas page.</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Text (Object to be counted)</p>
		<p class="indent1"><strong> Variables Used (y):</strong> Text (Matching criteria)</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<ul class="indent2">
			<li>This token is used to obtain the number of objects matching the provided criteria.</li>
			<li>This token can be used in any of the FOR loops in place of max.</li>
			<li>The matching criteria are a comma-delimited (,) list of quotated parameters assiciated with the &quot;Object&quot; being counted.</li>
			<li>The following tokens are the valid &lt;Objects to be counted&gt; (x) and the associated &lt;Matching criteria&gt; (y):</li>
			<ul>
				<li>ABILITIES - Will count the abilities that satisfy the included &quot;CATEGORY&quot;, &quot;NATURE&quot;, &quot;TYPE&quot;, and &quot;VISIBILITY&quot; parameters.</li>
				<ul>
					<li><code>&quot;CATEGORY=&lt;text&gt;&quot;</code> - The ability category as defined in the gamemode/miscinfo.lst file.</li>
					<li><code>&quot;NATURE=&lt;text&gt;&quot;</code> -  &quot;NORMAL&quot;, &quot;VIRTUAL&quot;, or &quot;AUTOMATIC&quot;.</li>
					<li><code>&quot;TYPE=&lt;text&gt;&quot;</code> -  The ability type as defined in the ability.lst file. (i.e. &quot;General&quot;, &quot;Fighter&quot;, &quot;Metamagic&quot;, etc.)</li>
					<li><code>&quot;VISIBILITY=&lt;text&gt;&quot;</code> -  </li>
				</ul>
				<li>CLASSES - Not yet implemented.</li>
				<li>DOMAINS - Not yet implemented.</li>
				<li>EQUIPMENT - Not yet implemented..</li>
				<li>FOLLOWERS - Not yet implemented..</li>
				<li>LANGUAGES - Not yet implemented.</li>
				<li>RACESUBTYPES - Not yet implemented.</li>
				<li>SPELLBOOKS - Not yet implemented.</li>
				<li>SPELLS - Not yet implemented.</li>
				<li>SPELLSKNOWN - Not yet implemented.</li>
				<li>SPELLSINBOOK - Not yet implemented.</li>
				<li>TEMPLATES - Not yet implemented.</li>
			</ul>
		</ul>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>count(&quot;ABILITIES&quot;,&quot;CATEGORY=FEAT&quot;,&quot;TYPE=Metamagic&quot;)</code></p>
		<p class="indent3">This token returns the number of metamagic feats the character has.</p>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="CSHEETTAG2">Token Name:</a></strong> CSHEETTAG2.x</p>
		<p class="indent1"><strong>Variables Used (x):</strong> Symbol (Replacement
		  symbol for the default &quot;\&quot;).</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2">Changes the delimiter used by embedded DFOR/FOR loops to the character specified.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code> CSHEETTAG2.~<br />
			DFOR.0,(COUNT[SKILLS]+1)/2,1,COUNT[SKILLS],(COUNT[SKILLS]+1)/2,&lt;td&gt;~SKILL%~&lt;/td&gt;
			&lt;td&gt;~SKILL%.TOTAL~&lt;/td&gt;&lt;td&gt;~SKILL%.RANK~&lt;/td&gt;<br />
			&lt;td&gt;~SKILL%.ABILITY~&lt;/td&gt;&lt;td&gt;~SKILL%.MOD~,&lt;tr
			align=&quot;center&quot;&gt;,&lt;/tr&gt;,0</code></p>
		<p class="indent3">This would change the field delimiter from the default &quot;\&quot; character for
			&quot;~&quot;. This allows the FOR/DFOR loop to be used in RTF output which does not allow the
			&quot;\&quot; character to be used</p>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="DFOR">Token Name:</a></strong> DFOR.r,s,t,u,v,w,x,y,z</p>
		<p class="indent1"><strong> Variables Used (r):</strong> Number (The initial value).</p>
		<p class="indent1"><strong> Variables Used (s):</strong> Number (Limit for new line progression).</p>
		<p class="indent1"><strong> Variables Used (t):</strong> Number (Value added once per line).</p>
		<p class="indent1"><strong> Variables Used (u):</strong> Number (Limit for in line progression).</p>
		<p class="indent1"><strong> Variables Used (v):</strong> Number (Value added in line until totalMax is passed).</p>
		<p class="indent1"><strong> Variables Used (w):</strong> Text (The phrase is the code that is parsed for tokens -
			use \'s instead of |'s, and the % within the tokens will be replaced with the actual value of the index).</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Text (The text that will
		  be printed at the beginning of the for loop and after the Variable &quot;y&quot;).</p>
		<p class="indent1"><strong> Variables Used (y):</strong> Text (The text that will
			be printed every time through the loop).</p>
		<p class="indent1"><strong> Variables Used (z):</strong> Number (The
			loop will break when no more items are found before the natural end of
		  the loop (max) if exists is 1. If exists is 2 and the charactersheet is
		  currently within a filter, PCGen will not print anything else until the
		  end of the filter |%| is reached or another filter is begun. 0 means it
		  will always loop
		  to the natural end of the loop.).</p>
	  <p class="indent1"><strong>What it does:</strong></p>
		<ul class="indent2">
			<li>Creates loop processing of statements. This is very similar to the
				FOR loop, except this allows for stepping across the table (in the same line)
				independent of stepping down.</li>
			<li>The initial value is <strong>r</strong>, the values going down are found by adding <strong>t</strong>
				to <strong>r</strong> once for each line.</li>
			<li>To find the value within the same line, this starting value (<strong>r</strong> for the first line, <strong>r</strong>
				+ <strong>t</strong> for the next, etc.) has <strong>v</strong> added
				to it, this is done as may times until <strong>u</strong> is passed.</li>
			<li>Likewise, <strong>t</strong> is added to <strong>r</strong> each
				line until <strong>s</strong> is passed.</li>
			<li>The same logic that handles the FOR loop handles the DFOR loop.</li>
			<li>The display of the output can be controlled via the COMMA and CRLF iteration terminators.</li>
		</ul>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code> DFOR.0,(COUNT[SKILLS]+1)/2,1,COUNT[SKILLS],
																(COUNT[SKILLS]+1)/2,&lt;td&gt;\SKILL%\&lt;/td&gt;<br />
															&lt;td&gt;\SKILL%.TOTAL\&lt;/td&gt;&lt;td&gt;\SKILL%.RANK\&lt;/td&gt;<br />
															&lt;td&gt;\SKILL%.ABILITY\&lt;/td&gt;&lt;td&gt;\SKILL%.MOD\,&lt;tr
																align=&quot;center&quot;&gt;,&lt;/tr&gt;,0</code></p>
		<p class="indent3">Produces a 2 column row table of all skills.</p>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="DIR">Token Name:</a></strong> DIR.x</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Text (Directory Option).</p>
		<ul class="indent2">
			<li>PCG - Displays the PCGen Character file (.PCG) directory.</li>
			<li>PCGen - Displays the PCGen System Directory.</li>
			<li>HTML - Displays the PCGen Character Output HTML directory.</li>
			<li>TEMP - Displays the system TEMP directory.</li>
			<li>TEMPLATES - Displays the PCGen Character Output Template directory.</li>
		</ul>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2">Displays File output paths.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>DIR.PCGen</code></p>
		<p class="indent3">Would display &quot;<code>D:\RPG\PCGen\system</code>&quot; if PCGen was installed
		  in &quot;<code>D:\RPG\PCGen</code>&quot;.</p>
		<p class="indent2"><code>DIR.TEMPLATES</code></p>
		<p class="indent3">Would display &quot;<code>D:\RPG\PCGen\outputsheets\d20\fantasy</code>&quot; if PCGen was installed
		  in &quot;<code>D:\RPG\PCGen</code>&quot;.</p>
		<p class="indent2"><code>DIR.PCG</code></p>
		<p class="indent3">Would display &quot;<code>D:\RPG\PCGen\characters</code>&quot; if PCGen was installed
		  in &quot;<code>D:\RPG\PCGen</code>&quot;.</p>
		<p class="indent2"><code>DIR.html</code></p>
		<p class="indent3">Would display &quot;<code>D:\RPG\PCGen\outputsheets\d20\fantasy\htmlxml</code>&quot; if PCGen was installed
		  in &quot;<code>D:\RPG\PCGen</code>&quot;.</p>
		<p class="indent2"><code>DIR.TEMP</code></p>
		<p class="indent3">Would display &quot;<code>C:\Temp</code>&quot; if that was the Operating System's temp directory.</p>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="EXPORT">Token Name:</a></strong> EXPORT.x</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Text (Export Option).</p>
		<ul class="indent2">
			<li>DATE - Displays the date of export.</li>
			<li>TIME - Displays the time of export.</li>
			<li>VERSION - Displays the version of PCGen used to export the character.</li>
		</ul>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2">Displays character export details.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>EXPORT.DATE</code></p>
		<p class="indent3">Displays the date of export.</p>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="FOR">Token Name:</a></strong> FOR.%v,w,x,y,z</p>
		<p class="indent1"><code>FOR.%v,w,x,y,z<br />{Statements}<br />ENDFOR</code></p>
		<p class="indent1"><strong> Variables Used (v):</strong> Text (Variable Name).</p>
		<p class="indent1"><strong> Variables Used (w):</strong> Number (The initial value).</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Number (Limit for new line progression -
			You may use a number, COUNT token, STRLEN token or any valid csheet token).</p>
		<p class="indent1"><strong> Variables Used (y):</strong> Number (Value added once per line).</p>
		<p class="indent1"><strong> Variables Used (z):</strong> Number (The
			loop will break when no more items are found before the natural end of the loop
			(max) if exists is 1. If exists is 2 and the charactersheet is currently
			within a filter, PCGen will not print anything else until the end of the filter
			|%| is reached or another filter is begun).</p>
	<p class="indent1"><strong>What it does:</strong></p>
		<ul class="indent2">
			<li>Creates loop processing of statements.</li>
			<li>Nested FOR loops are supported.</li>
			<li>The FOR and ENDFOR tokens must be at the start of the line or they will not function properly.</li>
			<li>STRLEN takes the form of STRLEN[stringtobecounted] and returns the number of characters in the string.</li>
		</ul>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>FOR,%test,0,20-STRLEN[SKILL.%skill],1,0<br />
															{Statements}<br />
															ENDFOR</code></p>
		<p class="indent3">Counts from 0 to 20 minus the sting length of the skill name.</p>
		<p></p>

<hr>
		
		<p class="indent0"><strong>Token Name:</strong> FOR.t,u,v,w,x,y,z</p>
		<p class="indent1"><strong> Variables Used (t):</strong> Number (The initial value).</p>
		<p class="indent1"><strong> Variables Used (u):</strong> Number (Limit for new line progression).</p>
		<p class="indent1"><strong> Variables Used (v):</strong> Number (Value added once per line).</p>
		<p class="indent1"><strong> Variables Used (w):</strong> Text (The phrase is the code that is parsed for tokens -
			use \'s instead of |'s, and the % within the tokens will be replaced with the actual value of the index).</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Text (The text that will
		  be printed at the beginning of the for loop and after the Variable &quot;y&quot;).</p>
		<p class="indent1"><strong> Variables Used (y):</strong> Text (The text that will
			be printed every time through the loop).</p>
		<p class="indent1"><strong> Variables Used (z):</strong> Number (The
			loop will break when no more items are found before the natural end of the loop
			(max) if exists is 1. If exists is 2 and the charactersheet is currently
			within a filter, PCGen will not print anything else until the end of the filter
			|%| is reached or another filter is begun).</p>
	<p class="indent1"><strong>What it does:</strong></p>
		<ul class="indent2">
			<li>Creates loop processing of statements.</li>
			<li>This style of for loops does not support nesting.</li>
			<li>If you have a FOR. loop involving the characters within the party for-loop, you must enclose the
				character for-loop in \\.</li>
			<li>FOR. loop on party sheets (psheet*.*) can only loop on character numbers, so \\%.NAME\\ is valid.</li>
			<li>You may use the special keywords <strong>COMMA</strong> or <strong>NONE</strong> for either <strong>x</strong>
				or <strong>y</strong> (COMMA prints out a comma and NONE prints out nothing)</li>
			<li>STRLEN takes the form of STRLEN[stringtobecounted] and returns the number of characters in the string.</li>
		</ul>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code> &lt;table&gt;<br />
														 |FOR.0,10,1,[td]\\%.FOR.0,100,1,\SKILL%\,(,),2\\,&lt;tr&gt;,&lt;/tr&gt;,1|<br />
														 &lt;/table&gt;</code></p>
		<p class="indent3">Produces a list of all the party member's skills.</p>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="IIF">Token Name:</a></strong> IIF(x.y.x)</p>
		<p class="indent1"><code>IIF Conditional Statement<br />{True Statements}<br />ELSE<br />{False Statements}<br />ENDIF</code></p>
		<p class="indent1"><strong> Variables Used (x):</strong> Text (Condition to be evaluated).</p>
		<p class="indent1"><strong> Variables Used (y):</strong> Text (Operator).</p>
		<ul class="indent2">
			<li>AND - True if both conditions are true.</li>
			<li>OR - True if either condition is true.</li>
		</ul>
		<p class="indent1"><strong>What it does:</strong></p>
		<ul class="indent2">
			<li>Evalutes the condition and processes the relevant statements.</li>
			<li>The first statements will be evaluated if the expression is true.</li>
			<li>The second statements will be evaluated if the expression is false.</li>
			<li>The logical operator and second expression are optional.</li>
			<li>ELSE and the second set of statements are optional.</li>
			<li>Nested IIFs are supported.</li>
		</ul>

		<p class="indent0"><strong>Token Name:</strong> IIF(&lt;JEP boolean expression&gt;)</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2">Evaluates the <a href="../../listfilepages/globalfilestagpages/globalfilesformulas.html#Boolean">JEP boolean expression</a>.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>IIF((CL>5)||(TL>5))</code></p>
		<p class="indent3">Returns TRUE if Class Level or Total Level ar greater-then 5.</p>

		<p class="indent0"><strong>Token Name:</strong> IIF(EVEN)</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2">True if the variable is an even number (frequently used to control grey/white
			shading by line).</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>IIF(EVEN:%spell)</code></p>
		<p class="indent3">Would be true if the spell line was even.</p>

		<p class="indent0"><strong>Token Name:</strong> IIF(UNEVEN)</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2">True if the variable is an uneven number.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>IIF(VAR.IF(VAR("COUNT[SKILLTYPE=Strength]")>0;1;0):1)</code></p>
		<p class="indent3">Evaluates to true if number of skills with type of Strength are
							greater than 0

							Notice the use of semi-colon where a comma should normally be
							used. This is because the comma is a delimeter at a higher level.

							Byngl</p>

		<p></p>
		<p class="indent0"><strong>Token Name:</strong> IIF(HASEQUIP)</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2">True if the character has the listed equipment.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>IIF(HASEQUIP:Dagger)</code></p>
		<p class="indent3">Would be true if character had a dagger.</p>

		<p></p>
		<p class="indent0"><strong>Token Name:</strong> IIF(HASFEAT)</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2">True if the character has the listed feat.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>IIF(HASFEAT:Sneak Attack)</code></p>
		<p class="indent3">Would be true if character has the Sneak Attack Feat.</p>

		<p></p>
		<p class="indent0"><strong>Token Name:</strong> IIF(HASSA)</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2">True if the character has the listed Special Ability.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>IIF(HASSA:Greater Rage)</code></p>
		<p class="indent3">Would be true if character has the Greater Rage Special Ability.</p>

		<p></p>
		<p class="indent0"><strong>Token Name:</strong> IIF(HASVAR)</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2"> True if the user has taken a class that defined the named (often used to determine
			whether or not to display special abilities).</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>IIF(HASVAR:BasePowerPoints)</code></p>
		<p class="indent3">Would be true if character has a class with Base Power Points.</p>

		<p></p>
		<p class="indent0"><strong>Token Name:</strong> IIF(SKILL.x.UNTRAINED)</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Number (The array number of the skill).</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2">True if Skill x is usable untrained.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>IIF(SKILL.%skill.UNTRAINED)</code></p>
		<p class="indent3">Would be true if the current skill is usable untrained.</p>

		<p></p>
		<p class="indent0"><strong>Token Name:</strong> IIF(SKILL.UNTRAINED,x,y)</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Text (Result if usable untrained).</p>
		<p class="indent1"><strong> Variables Used (y):</strong> Text (Result if usable trained).</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<ul class="indent2">
			<li>Prints out <strong>x</strong> if the skill is usable untrained or <strong>y</strong> if not usable untrained.</li>
			<li>If <strong>y</strong> is not supplied, nothing is printed if trained only, and <strong>x</strong> is
				printed if usable untrained.</li>
			<li>If neither <strong>x</strong> nor <strong>y</strong> are supplied, nothing is output and the output
				sheet wastes processor cycles.</li>
		</ul>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>IIF(SKILL%.UNTRAINED,YES,NO)</code></p>
		<p class="indent3">Prints out &quot;YES&quot; if the skill is usable untrained or &quot;NO&quot;
		  if not usable untrained.</p>

		<p></p>
		<p class="indent0"><strong>Token Name:</strong> IIF(SKILL.ACP,w,x,y,z)</p>
		<p class="indent1"><strong> Variables Used (w):</strong> Text (Result if the skill is not affected by ACP).</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Text (Result if the skill is affected by ACP).</p>
		<p class="indent1"><strong> Variables Used (y):</strong> Text (Result if the skill is only affected by ACP if the user is untrained).</p>
		<p class="indent1"><strong> Variables Used (z):</strong> Text (Result if the skill has the special weight penalty like Swim).</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2">Tests for armor check penalty (ACP) interaction with this skill.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>IIF(SKILL%.ACP,NOT,IS,UNTRAINED,SWIM)</code></p>
		<p class="indent3">Prints out &quot;YES&quot; if the skill is not effected by ACP, &quot;NO&quot;
		  if the skill is effected by ACP, &quot;UNTRAINED&quot; if the skill is effected by ACP only if the character is untrained
			, &quot;SWIM&quot; if the skill is effected by ACP only if it has a special weight penalty.</p>

		<p></p>
		<p class="indent0"><strong>Token Name:</strong> IIF(SPELLCASTER:x)</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Text (Caster Type - Possible values include Wizard or Arcane).</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2"> True if character is a spell caster of type specified.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>IIF(SPELLCASTER:Wizard)</code></p>
		<p class="indent3">Would be true if the character is a Wizard.</p>

		<p></p>
		<p class="indent0"><strong>Token Name:</strong> IIF(SPELLCASTER:x=PREPARE)</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Number (The array number of the spellcaster class).</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2"> True if the characters spellcaster class <strong>x</strong> has to prepare spells.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>IIF(SPELLCASTER:0=PREPARE)</code></p>
		<p class="indent3">Would be true if the character's 1st class prepares spells.</p>
		<p class="indent2"><code>IIF(SPELLCASTER:0=!PREPARE)</code></p>
		<p class="indent3">Would be true if the character's 1st class does not prepare spells.</p>

		<p></p>
		<p class="indent0"><strong>Token Name:</strong> IIF(WEAPON.x.CATEGORY:y)</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Number (The array number of the weapon).</p>
		<p class="indent1"><strong> Variables Used (y):</strong> Text (Weapon Type - Possible values include:
			Melee, Ranged, Exotic, Non-Standard-Melee).</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2"> True if the weapon <strong>x</strong> is part of the category <strong>y</strong>.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>IIF(WEAPON.%weap.CATEGORY:Ranged)</code></p>
		<p class="indent3">True if the current weapon is part of the Ranged category.</p>

		<p></p>
		<p class="indent0"><strong>Token Name:</strong> IIF(x:y)</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Text (Any valid token).</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Text (Condition variable).</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2"> True if the token is equal to the value.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>IIF(COMBAT.AC.TOTAL:20)</code></p>
		<p class="indent3">Would be true if the combat AC total was 20.</p>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="MANUALWHITESPACE">Token Name:</a></strong> MANUALWHITESPACE</p>
		<p class="indent1"><code>MANUALWHITESPACE<br />{Statements}<br />ENDMANUALWHITESPACE<br /></code></p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2">Marks a section where the author does not
		want white space added to the output sheet. If white space is desired the |BR|
		tag can be used, or a sheet format specific entry such as &amp;nbsp; can be
		used in the sheet definition.</p>
		<p class="indent2">Within a manual whitespace section, all whitespace in the output sheet
		i.e. all newlines, spaces, tabs, etc. disappears. Whitespace
		inside the text of returned from a OS token is preserved however. All leading and
		trailing whitespace is trimmed, as is normally done.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>|MANUALWHITESPACE|
1&amp;nbsp;<br/>
|PLAYERNAME|<br/>
2 3&lt;br&gt;<br/>
4<br/>
|ENDMANUALWHITESPACE|
</code></p>
		<p class="indent3">Where |PLAYERNAME| in this case is "Chuck Pint". Then the output would
look like:<br/>

<code>1&amp;nbsp;Chuck Pint23&lt;br&gt;4</code></p>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="OIF">Token Name:</a></strong> OIF(x,y,z)</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Text (Condition to be evaluated).</p>
		<p class="indent1"><strong> Variables Used (y):</strong> Text (Value returned if True).</p>
		<p class="indent1"><strong> Variables Used (z):</strong> Text (Value returned if False).</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<ul class="indent2">
			<li>Provides conditional processing of expressions.</li>
			<li>Will take <a href="../../listfilepages/globalfilestagpages/globalfilesformulas.html#Boolean">JEP boolean expressions</a> as the conditional statement.</li>
			<li>Only the expressions mentioned above for IIF are currently supported.</li>
		</ul>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>OIF(HASFEAT:Armor Proficiency (Light),YES,NO)</code></p>
		<p class="indent3">If the character has the Light Armor proficiency, then returns
		  &quot;YES&quot;. Otherwise it returns &quot;NO&quot;.</p>
		<p class="indent2"><code>OIF((CL>5)||(TL>5),YES,NO)</code></p>
		<p class="indent3">Returns &quot;YES&quot; if Class Level or Total Level ar greater then 5. 
		Oterwise it returns &quot;NO&quot;</p>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="PIPE">Token Name:</a></strong> PIPE</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2">Inserts a pipe (&quot;|&quot;) character.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>Pipe|PIPE|Example</code></p>
		<p class="indent3">Would display &quot;Pipe|Example&quot;.</p>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="SUB">Token Name:</a></strong> SUB#.</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2">Limits the length of the string written to the output sheet to no more than # characters. For it to work it as to be the first subtoken.</p>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>SUB10.SPELLMEM.0.0.0.0.COMPONENTS</code></p>
		<p class="indent3">Would limit the output from the above tag to no more than 10 characters.</p>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="TEXT">Token Name:</a></strong> TEXT.x.</p>
		<p class="indent1"><strong> Variables Used (x):</strong>LOWER, LOWERCASE, SENTENCE, SENTENCECASE, TITLE, TITLECASE, UPPER, UPPERCASE or NUMSUFFIX</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<p class="indent2">Alters the output of the following tag. For it to work it has to be the first subtoken.  The following are the subrags allowed and their effect.</p>
		<ul class="indent2">
			<li>LENGTH - Returns the length of the string the specified token produces. (Mostly useful to test for 0 length strings)</li>
			<li>LOWER, LOWERCASE - Output the tag result in lower case. e.g. the vitamins are in my fresh brussels sprouts</li>
			<li>NUMSUFFIX - Output a numeric suffix appropriate for the tag result. e.g th or rd</li>
			<li>REPLACE, REPLACEALL - Does a regular expression based search and replace on the string produced by the associated token. Multiple replacements can be specified and are processed right to left.
			<li>SENTENCE, SENTENCECASE - Output the tag result in sentence case. e.g. The vitamins are in my fresh brussels sprouts</li>
			<li>TITLE, TITLECASE - Output the tag result in title case. e.g. The Vitamins Are In My Fresh Brussels Sprouts</li>
			<li>UPPER, UPPERCASE - Output the tag result in upper case. e.g. THE VITAMINS ARE IN MY FRESH BRUSSELS SPROUTS</li>
		</ul>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>TEXT.LOWER.SPELLMEM.%class.0.%level.%spell.NAME</code></p>
		<p class="indent3">Would output the name for the spell in lower case.</p>
		<p class="indent2"><code>TEXT.NUMSUFFIX.22</code></p>
		<p class="indent3">Would output a suffix of nd rather than the value 22.</p>
		<p></p>

<hr>
		
		<p class="indent0"><strong><a name="VAR">Token Name:</a></strong> VAR.x</p>
		<p class="indent1"><strong> Variables Used (x):</strong> Text (Any defined variable name).</p>
		<p class="indent1"><strong>What it does:</strong></p>
		<ul class="indent2">
			<li>Displays the value of a defined variable.</li>
			<li>The default is with one decimal place of precision (i.e. x.x).</li>
			<li>You can also append .INTVAL as an optional argument which displays
				the result with no decimal points (as an integer).</li>
			<li>It is possible to define the Turn Undead variable more than once. The program keeps track of this. (say one instance
				is 2 and the other 4).</li>
			<li>Also .MINVAL should be included if instead of the default maximum of multiple defines, you want the minimum.</li>
			<li></li>
		</ul>
		<p class="indent1"><strong>Example:</strong></p>
		<p class="indent2"><code>VAR.Turn Undead.MINVAL.INTVAL</code></p>
		<p class="indent3">Would return 2.</p>
		<p class="indent2"><code>VAR.Turn Undead.INTVAL</code></p>
		<p class="indent3">Would return 4.</p>
		<p class="indent2"><code>VAR.Turn Undead.MINVAL</code></p>
		<p class="indent3">Would return 2.0.</p>
		<p class="indent2"><code>VAR.Turn Undead</code></p>
		<p class="indent3">Would return 4.0.</p>

	<p>
	<a href="http://validator.w3.org/check?uri=referer"><img
       	src="../../images/system/valid-html401.png"
       	alt="Valid HTML 4.01 Strict" height="31" width="88"></a>
	</p>

</body>

</html>
